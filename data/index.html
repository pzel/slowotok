<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name=viewport content="width=device-width, initial-scale=1"/>
    <title>Słowotok, czyli Lorem Ipsum po polsku</title>
    <style type="text/css">
      body { margin: 0 auto; width: 80%; }
      h1 { font-style: italic; }
      #slowotok-output { margin: 20px auto; min-height: 200px;}
    </style>
  </head>
  <body>
    <h1>Słowotok, czyli Lorem Ipsum po polsku</h1>
    <button id="generate">Generuj</button>
    <div id="slowotok-output">&nbsp;</div>
    <hr>
    <p><small>Tekst wygenerowany z polskich tekstów udostępnionych przez
      <a target="_blank" href="http://wolnelektury.pl/">Wolne Lektury</a> i
      udostępniony w ramach licencji
      <a target="_blank" href="http://creativecommons.org/licenses/by-sa/3.0/deed.pl">Uznanie autorstwa-Na tych samych warunkach 3.0</a> | 
      Wykonał: <a target="_blank" href="https://github.com/pzel">Simon Zelazny</a>
    </small></p>
  </body>
    <script type="text/javascript">
      var renderText = (function(){
          var outputField = document.getElementById("slowotok-output");
          return function(text){ outputField.textContent=text; }
      })();
      var gen = function(e){
        var request = new XMLHttpRequest();
        request.open('GET', '/text/300', true);
        request.onload = function() {
        if (request.status >= 200 && request.status < 400) {
          renderText(request.responseText);
        } else { alert("error") }};
       request.onerror = function() {alert("error")};
       request.send();
      }
      document.getElementById("generate").addEventListener('click', gen);
      function ready(fn) {if (document.readyState != 'loading'){fn()} 
                         else {document.addEventListener('DOMContentLoaded', fn)}};
      ready(function(){return gen(undefined)});
    </script>
</html>
