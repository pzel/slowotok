<!doctype html>
<html lang="pl">
  <head>
    <meta charset="utf-8">
    <meta name=viewport content="width=device-width, initial-scale=1"/>
    <title>Słowotok, czyli Lorem Ipsum po polsku</title>
    <style type="text/css">
      html[lang="pl"] *[lang="en"] {display:none;}
      html[lang="en"] *[lang="pl"] {display:none;}
      body { margin: 0 auto; width: 80%; }
      h1 { font-style: italic; }
      #slowotok-output { margin: 20px auto; min-height: 200px;}
    </style>
  </head>
  <body>
    <h1 lang="pl">Słowotok, czyli Lorem Ipsum po polsku</h1>
    <h1 lang="en">Logorrhea, a nonsense generator</h1>
    <button id="generate-pl">Generuj polski słowotok</button>
    <button id="generate-en">Generate English logorrhea</button>
    <div id="slowotok-output">&nbsp;</div>
    <hr>
    <p lang="pl"><small>Tekst wygenerowany z polskich tekstów udostępnionych w ramach licencji 
      <a target="_blank" href="http://creativecommons.org/licenses/by-sa/3.0/deed.pl">Uznanie autorstwa-Na tych samych warunkach 3.0</a>
      przez <a target="_blank" href="http://wolnelektury.pl/">Wolne Lektury</a>
      | 
      Wykonał: <a target="_blank" href="https://github.com/pzel">Simon Zelazny</a>
    </small></p>
    <p lang="en"><small>This text was generated from Public Domain materials available at
      <a target="_blank" href="https://www.gutenberg.org/">Project Gutenbert</a>
      Made by: <a target="_blank" href="https://github.com/pzel">Simon Zelazny</a>
    </small></p>
  </body>
    <script type="text/javascript">
      var renderText = (function(){
          var outputField = document.getElementById("slowotok-output");
          return function(text){ outputField.textContent=text; }
      })();
      var gen = (function(){
        var top = document.querySelectorAll("html")[0];
        return function(lang){return function(e){
            var request = new XMLHttpRequest();
            request.open('GET', '/text/'+lang+'/300', true);
            request.onload = function() {
            if (request.status >= 200 && request.status < 400) {
              top.setAttribute("lang", lang);
              renderText(request.responseText);
            } else { alert("error") }};
           request.onerror = function() {alert("error")};
           request.send();
      }}})();
      document.getElementById("generate-pl").addEventListener('click', gen("pl"));
      document.getElementById("generate-en").addEventListener('click', gen("en"));
      function ready(fn) {if (document.readyState != 'loading'){fn()} 
                         else {document.addEventListener('DOMContentLoaded', fn)}};
      ready(function(){return (gen("pl"))(undefined)});
    </script>
</html>
